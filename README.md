# FinalProject

ფინალური პროექტი Android-ში

სანდრო ჯიქია

სოსო ქვრივიშვილი

## About

აპლიკაციაში შესვლისთანავე მოითხოვება WiFi და Location-ის ჩართვა. წინააღმდეგ შემთხვევა ვერ ხდება აპლიკაციის გამოყენება.

აპლიკაციას აქვს Navigation Drawer, რომელშიც 2 გვერდია - ჩატი და ისტორია. თავიდან ისტორიაში ვიმყოფებით, სადაც ვხედავთ აქამდე არსებული ჩატების ისტორიას, ბოლო მესიჯის თარიღით და მესიჯების რაოდენობებით. 

ჩატში გადასვლისას ხდება ყველა WiFi Direct Сonnection-ის და Group-ის დახურვა ბევრი პრობლემის ასაცილებლად. ამის შემდეგ მოწყობილობა ეძებს ყველა მოწყობილობას რომელიც WiFi Direct-ს ძებნის რეჟიმშია და სიის სახით გვაჩვენებს ყველა მოწყობილობას. თუ რაღაც დროის შემდეგ ძებნა შეწყდა, ამას გავიგებთ Toolbar-ში მარჯვნივ icon-ით რომელიც ანიმაციას შეწყვეტს და უბრალოთ თეთრი icon გახდება. ამ icon-ზე დაჭერისას ძებნა განახლდება. 

შეგვიძლია დავაჭიროთ ნებისმიერ მომხმარებელს, რის შემდეგაც მომხმარებელს გაეგზავნება Invitation. Accept-ზე დაჭერისას ორივე მოწყობილობას მიუვა Broadcast Receiver-ში შეტყობინება, რის შედეგადაც იგებენ რომელია Group Owner-ი და რომელი client. Group Owner-ი ქმნის socket-ს, client უკავშირდება ამ socket-ს. თუ Decline-ს დააჭირა ან სხვა მიზეზების გამო ვერ მოხდა ამ მომხმარებელთან დაკავშირება, გამგზავნი მოწყობილობა წყვეტს კავშირის რეჟიმში ყოფნას 15 წამის ლოდინის შემდეგ. 

მას შემდეგ რაც socket შეიქმნა და კლიენტიც დაუკავშირდა, ორივეს ეხსნება chat სადაც socket-ის მეშვეობით ხდება მიმოწერა. ჩატში შესვლისთანავე ბაზაში ინახება ისტორია, ანუ ცარიელი ჩატი. ყოველი ახალი მესიჯის მოსვლისთანავე ეს მესიჯიც ბაზაში ინახება. თუ რომელიმე მომხმარებელი ჩატიდან გავიდა, ან აპლიკაცია დახურა, ის ბოლო მესიჯს აგზავნის, რაც რაღაც რანდომ კონსტანტა სტრინგია, რითაც მეორე მომხმარებელი ხვდება რომ პირველი გავიდა და ისიც ხურავს ჩატს.
